<!DOCTYPE html><html lang="en"><head><meta name="generator" content="Hexo 3.8.0"><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>Python时间模块 | 好记性不如烂笔头</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/normalize/8.0.1/normalize.min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/1.0.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/1.0.0/grids-responsive-min.css"><link rel="stylesheet" href="//lib.baomitu.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//lib.baomitu.com/jquery/3.3.1/jquery.min.js"></script><link rel="icon" mask="" sizes="any" href="/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">Python时间模块</h1><a id="logo" href="/.">好记性不如烂笔头</a><p class="description"></p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> Home</i></a><a href="/archives/"><i class="fa fa-archive"> Archive</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">Python时间模块</h1><div class="post-meta">Jan 5, 2017</div><div class="post-content"><h1 id="得到当前时间"><a href="#得到当前时间" class="headerlink" title="得到当前时间"></a>得到当前时间</h1><p>使用time模块，首先得到当前的时间戳<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">In [42]: time.time()</span><br><span class="line">Out[42]: 1408066927.208922</span><br></pre></td></tr></table></figure></p>
<h1 id="将时间戳转换为时间元组-struct-time"><a href="#将时间戳转换为时间元组-struct-time" class="headerlink" title="将时间戳转换为时间元组 struct_time"></a>将时间戳转换为时间元组 struct_time</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">In [43]: time.localtime(time.time())</span><br><span class="line">Out[43]: time.struct_time(tm_year=2014, tm_mon=8, tm_mday=15, tm_hour=9, tm_min=42, tm_sec=20, tm_wday=4, tm_yday=227, tm_isdst=0)</span><br></pre></td></tr></table></figure>
<h1 id="格式化输出想要的时间"><a href="#格式化输出想要的时间" class="headerlink" title="格式化输出想要的时间"></a>格式化输出想要的时间</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">In [44]: time.strftime(&apos;%Y-%m-%d %H:%M:%S&apos;,time.localtime(time.time()))</span><br><span class="line">Out[44]: &apos;2014-08-15 09:43:04&apos;</span><br></pre></td></tr></table></figure>
<p>接上文，不加参数时，默认就是输出当前的时间<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">In [48]: time.strftime(&apos;%Y-%m-%d %H:%M:%S&apos;)</span><br><span class="line">Out[48]: &apos;2014-08-15 09:46:53’</span><br></pre></td></tr></table></figure></p>
<p>当然也可以透过datetime模块来实现，如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">In [68]: t = time.time()</span><br><span class="line">In [69]: datetime.datetime.fromtimestamp(t).strftime(&apos;%Y-%m-%d %H:%M:%S&apos;)</span><br><span class="line">Out[69]: &apos;2014-08-15 10:04:51’</span><br></pre></td></tr></table></figure></p>
<p>同时，也可以只使用datetime模块<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">In [46]: datetime.datetime.now().strftime(&apos;%Y-%m-%d %H:%M:%S&apos;)</span><br><span class="line">Out[46]: &apos;2014-08-15 09:45:27’</span><br><span class="line">In [47]: datetime.datetime.today().strftime(&apos;%Y-%m-%d %H:%M:%S&apos;)</span><br><span class="line">Out[47]: &apos;2014-08-15 09:46:10&apos;</span><br></pre></td></tr></table></figure></p>
<h1 id="2-获取时间差，计算程序的执行时间等："><a href="#2-获取时间差，计算程序的执行时间等：" class="headerlink" title="2.获取时间差，计算程序的执行时间等："></a>2.获取时间差，计算程序的执行时间等：</h1><p>使用time模块：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">In [75]: def t():</span><br><span class="line">   ....:     start = time.time()</span><br><span class="line">   ....:     time.sleep(10)</span><br><span class="line">   ....:     end = time.time()</span><br><span class="line">   ....:     print end - start</span><br><span class="line">   ....:</span><br><span class="line"></span><br><span class="line">In [76]: t()</span><br><span class="line">10.0014948845</span><br></pre></td></tr></table></figure></p>
<p>使用datetime模块：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">In [49]: starttime = datetime.datetime.now()</span><br><span class="line">In [50]: endtime = datetime.datetime.now()</span><br><span class="line">In [51]: print (endtime - starttime).seconds</span><br></pre></td></tr></table></figure></p>
<p>6</p>
<h1 id="3-计算昨天的日期（发散思维，计算其他日期相加、相减等）："><a href="#3-计算昨天的日期（发散思维，计算其他日期相加、相减等）：" class="headerlink" title="3.计算昨天的日期（发散思维，计算其他日期相加、相减等）："></a>3.计算昨天的日期（发散思维，计算其他日期相加、相减等）：</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">In [52]: d1 = datetime.datetime.now()</span><br><span class="line">In [53]: d2 = d1 - datetime.timedelta(days=1)</span><br><span class="line">In [54]: d1</span><br><span class="line">Out[54]: datetime.datetime(2014, 8, 15, 9, 54, 10, 68665)</span><br><span class="line">In [55]: d2</span><br><span class="line">Out[55]: datetime.datetime(2014, 8, 14, 9, 54, 10, 68665)</span><br></pre></td></tr></table></figure>
<h1 id="4-时间元组-struct-time转化为时间戳"><a href="#4-时间元组-struct-time转化为时间戳" class="headerlink" title="4.时间元组 struct_time转化为时间戳"></a>4.时间元组 struct_time转化为时间戳</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">In [56]: datetime.datetime.now()</span><br><span class="line">Out[56]: datetime.datetime(2014, 8, 15, 9, 57, 52, 779893)</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">In [57]: datetime.datetime.now().timetuple()</span><br><span class="line">Out[57]: time.struct_time(tm_year=2014, tm_mon=8, tm_mday=15, tm_hour=9, tm_min=58, tm_sec=12, tm_wday=4, tm_yday=227, tm_isdst=-1)</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">In [58]: time.mktime(datetime.datetime.now().timetuple())</span><br><span class="line">Out[58]: 1408067904.0</span><br></pre></td></tr></table></figure>
<p>5.strptime也挺有用的，将时间字符串转换为时间元组struct_time</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">In [73]: time.strftime(&apos;%Y-%m-%d %H:%M:%S&apos;)</span><br><span class="line">Out[73]: &apos;2014-08-15 10:27:36&apos;</span><br></pre></td></tr></table></figure>
<p>In [74]: time.strptime(‘2014-08-15 10:27:36’,’%Y-%m-%d %H:%M:%S’)<br>Out[74]: time.struct_time(tm_year=2014, tm_mon=8, tm_mday=15, tm_hour=10, tm_min=27, tm_sec=36, tm_wday=4, tm_yday=227, tm_isdst=-1)</p>
<p><a href="http://www.cnpythoner.com/post/89.html" target="_blank" rel="noopener">http://www.cnpythoner.com/post/89.html</a></p>
<p>时间字字符串和时间戳的转换：<a href="http://fcamel-life.blogspot.jp/2010/11/python.html" target="_blank" rel="noopener">http://fcamel-life.blogspot.jp/2010/11/python.html</a></p>
<p>python时间相互转换：<a href="http://blog.sina.com.cn/s/blog_b09d460201018o0v.html" target="_blank" rel="noopener">http://blog.sina.com.cn/s/blog_b09d460201018o0v.html</a></p>
<p>Date and Time Representation in Python：<a href="http://www.seehuhn.de/pages/pdate" target="_blank" rel="noopener">http://www.seehuhn.de/pages/pdate</a></p>
<p>strptime和strftime相互转换：<a href="http://blog.libears.com/2011-08-16/python/strptime%E5%92%8Cstrftime" target="_blank" rel="noopener">http://blog.libears.com/2011-08-16/python/strptime%E5%92%8Cstrftime</a></p>
<p>##二：time和datetime模块常用方法简介</p>
<p>表示时间的两种方式：</p>
<ol>
<li>时间戳(相对于1970.1.1 00:00:00以秒计算的偏移量),时间戳是惟一的</li>
<li>时间元组 即(struct_time),共有九个元素，分别表示，同一个时间戳的struct_time会因为时区不同而不同<br>time 模块常用方法小记</li>
</ol>
<p>1.time.clock（）</p>
<p>这个需要注意，在不同的系统上含义不同。在UNIX系统上，它返回的是“进程时间”，它是用秒表示的浮点数（时间 戳）。而在WINDOWS中，第一次调用，返回的是进程运行的实际时间。而第二次之后的调用是自第一次调用以后到现在的运行时间。（实际上是以WIN32 上QueryPerformanceCounter()为基础，它比毫秒表示更为精确）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">budong@budongdeMacBook-Pro:/tmp$ cat clock.py</span><br><span class="line">#!/usr/bin/env python</span><br><span class="line">import time</span><br><span class="line">if __name__ == &apos;__main__&apos;:</span><br><span class="line">    time.sleep(1)</span><br><span class="line">    print &quot;clock1:%s&quot; % time.clock()</span><br><span class="line">    time.sleep(1)</span><br><span class="line">    print &quot;clock2:%s&quot; % time.clock()</span><br><span class="line">    time.sleep(1)</span><br><span class="line">    print &quot;clock3:%s&quot; % time.clock()</span><br><span class="line"></span><br><span class="line">运行脚本：</span><br><span class="line">budong@budongdeMacBook-Pro:/tmp$ ./clock.py</span><br><span class="line">clock1:0.059173</span><br><span class="line">clock2:0.059299</span><br><span class="line">clock3:0.059416</span><br><span class="line">2.time.sleep(secs)</span><br></pre></td></tr></table></figure>
<p>线程推迟指定的时间运行<br>适合放在脚本里，定时sleep一会然后继续干啥</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">In [138]: while True:</span><br><span class="line">   .....:     time.sleep(3)</span><br><span class="line">   .....:     print time.strftime(&apos;%H:%M:%S&apos;)</span><br><span class="line">   .....:</span><br><span class="line">17:21:35</span><br><span class="line">17:21:38</span><br><span class="line">17:21:41</span><br><span class="line">17:21:44</span><br><span class="line">……</span><br><span class="line">3.time.localtime([secs])</span><br></pre></td></tr></table></figure>
<p>将一个时间戳转换成一个当前时区的struct_time，如果seconds参数未输入，则以当前时间为转换标准<br>未提供secs参数时，按当前时间为准<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">In [141]: time.localtime()</span><br><span class="line">Out[141]: time.struct_time(tm_year=2014, tm_mon=8, tm_mday=14, tm_hour=17, tm_min=23, tm_sec=48, tm_wday=3, tm_yday=226, tm_isdst=0)</span><br></pre></td></tr></table></figure></p>
<p>提供secs为当前时间戳时<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">In [142]: time.time()</span><br><span class="line">Out[142]: 1408008232.217969</span><br><span class="line">In [143]: time.localtime(time.time())</span><br><span class="line">Out[143]: time.struct_time(tm_year=2014, tm_mon=8, tm_mday=14, tm_hour=17, tm_min=24, tm_sec=2, tm_wday=3, tm_yday=226, tm_isdst=0)</span><br><span class="line">4.time.strftime(format[, t])</span><br></pre></td></tr></table></figure></p>
<p>将指定的struct_time(默认为当前时间)，根据指定的格式化字符串输出<br>t未指定，传入time.localtime()作为默认参数：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">In [156]: time.strftime(&apos;%Y-%m-%d %H:%M:%S&apos;)</span><br><span class="line">Out[156]: &apos;2014-08-14 17:28:16’</span><br></pre></td></tr></table></figure></p>
<p>指定t为time.localtime(1407945600.0)时：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">In [157]: time.localtime(1407945600.0)</span><br><span class="line">Out[157]: time.struct_time(tm_year=2014, tm_mon=8, tm_mday=14, tm_hour=0, tm_min=0, tm_sec=0, tm_wday=3, tm_yday=226, tm_isdst=0)</span><br><span class="line"></span><br><span class="line">In [158]: time.strftime(&apos;%Y-%m-%d %H:%M:%S&apos;,time.localtime(1407945600.0))</span><br><span class="line">Out[158]: &apos;2014-08-14 00:00:00’</span><br></pre></td></tr></table></figure></p>
<p>5.time.time（）</p>
<p>返回当前时间的时间戳<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">In [161]: time.time()</span><br><span class="line">Out[161]: 1408008711.730218</span><br></pre></td></tr></table></figure></p>
<p>6.time.mktime(t)</p>
<p>将一个struct_time转换为时间戳,如下time.localtime接收一个时间戳返回一个struct_time，而time.mktime接收一个struct_time，返回一个时间戳<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">In [159]: time.localtime(1407945600.0)</span><br><span class="line">Out[159]: time.struct_time(tm_year=2014, tm_mon=8, tm_mday=14, tm_hour=0, tm_min=0, tm_sec=0, tm_wday=3, tm_yday=226, tm_isdst=0)</span><br><span class="line">In [160]: time.mktime(time.localtime(1407945600.0))</span><br><span class="line">Out[160]: 1407945600.0</span><br></pre></td></tr></table></figure></p>
<p>残阳似血的博客：<a href="http://qinxuye.me/article/details-about-time-module-in-python/" target="_blank" rel="noopener">http://qinxuye.me/article/details-about-time-module-in-python/</a> </p>
<p>官方time模块：<a href="http://python.me/library/time.html#module-time" target="_blank" rel="noopener">http://python.me/library/time.html#module-time</a></p>
<p>##datetime 模块常用方法小记</p>
<p>datetime模块常用的主要有下面这四个类：</p>
<ol>
<li>datetime.date: 是指年月日构成的日期(相当于日历)</li>
<li>datetime.time: 是指时分秒微秒构成的一天24小时中的具体时间(相当于手表)</li>
<li>datetime.datetime: 上面两个合在一起，既包含时间又包含日期</li>
<li>datetime.timedelta: 时间间隔对象(timedelta)。一个时间点(datetime)加上一个时间间隔(timedelta)可以得到一个新的时间点(datetime)。比如今天的上午3点加上5个小时得到今天的上午8点。同理，两个时间点相减会得到一个时间间隔。<br>1.datetime.date 类</li>
</ol>
<p>1.新建一个date对象，日期为今天，既可以直接调用datetime.date.today()，也可以直接向datetime.date()传值，如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">In [4]: today = datetime.date.today()</span><br><span class="line">In [5]: today</span><br><span class="line">Out[5]: datetime.date(2014, 8, 15)</span><br><span class="line">In [6]: t = datetime.date(2014,8,15)</span><br><span class="line">In [7]: t</span><br><span class="line">Out[7]: datetime.date(2014, 8, 15)</span><br></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">2.datetime.date.strftime(format) 格式化为需要的时间，如常用的 “年-月-日 小时：分钟：秒” 格式</span><br><span class="line">In [8]: today.strftime(&apos;%Y-%m-%d %H:%M:%S&apos;)</span><br><span class="line">Out[8]: &apos;2014-08-15 00:00:00’</span><br><span class="line">date对象中小时、分钟、秒默认都是0，纪元年的那个时间</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">3.datetime.date.timple() 转成struct_time格式，这样传递给time.mktime(t)  后，直接转成时间戳格式</span><br><span class="line">In [9]: today.timetuple()</span><br><span class="line">Out[9]: time.struct_time(tm_year=2014, tm_mon=8, tm_mday=15, tm_hour=0, tm_min=0, tm_sec=0, tm_wday=4, tm_yday=227, tm_isdst=-1)</span><br><span class="line">In [10]: time.mktime(today.timetuple())</span><br><span class="line">Out[10]: 1408032000.0</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">4.datetime.date.replace(year, month, day)  返回一个替换后的date对象</span><br><span class="line">In [11]: today.replace(year=2013)</span><br><span class="line">Out[11]: datetime.date(2013, 8, 15)</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">5.datetime.date.fromtimestamp(timestamp) 将时间戳转化为date对象</span><br><span class="line">In [12]: datetime.date.fromtimestamp(1408058729)</span><br><span class="line">Out[12]: datetime.date(2014, 8, 15)</span><br><span class="line">2.datetime.time 类</span><br></pre></td></tr></table></figure>
<p>1.新建一个time对象<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">In [15]: t</span><br><span class="line">Out[15]: datetime.time(8, 45, 20)</span><br></pre></td></tr></table></figure></p>
<p>2.datetime.time.(format)格式化输出<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">In [16]: t.strftime(&apos;%Y-%m-%d %H:%M:%S&apos;)</span><br><span class="line">Out[16]: &apos;1900-01-01 08:45:20’</span><br><span class="line">time对应的年、月、日为1900、01、01，纪元年的那个时间</span><br></pre></td></tr></table></figure></p>
<p>3.datetime.time.replace([hour[, minute[, second[, microsecond[, tzinfo]]]]])  返回一个替换后的time对象<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">In [17]: t.replace(hour=9)</span><br><span class="line">Out[17]: datetime.time(9, 45, 20)</span><br></pre></td></tr></table></figure></p>
<p>3.datetime.datetime类</p>
<p>其实和date的那些方法差不多了，大概看以下，简单说说<br>1.新建一个datetime对象，日期为今天，既可以直接调用datetime.datetime.today()，也可以直接向datetime.datetime()传值，如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">In [21]: d1 = datetime.datetime.today()</span><br><span class="line">In [22]: d1</span><br><span class="line">Out[22]: datetime.datetime(2014, 8, 15, 8, 12, 34, 790945)</span><br><span class="line">In [23]: d2 = datetime.datetime(2014, 8, 15, 8, 12, 34, 790945)</span><br><span class="line">In [24]: d2</span><br><span class="line">Out[24]: datetime.datetime(2014, 8, 15, 8, 12, 34, 790945)</span><br></pre></td></tr></table></figure></p>
<p>2.datetime.datetime.now([tz]) 当不指定时区时，和datetime.datetime.today()是一样的结果，如下<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">In [25]: datetime.datetime.now()</span><br><span class="line">Out[25]: datetime.datetime(2014, 8, 15, 8, 14, 50, 738672)</span><br></pre></td></tr></table></figure></p>
<p>3..datetime.datetime.strftime(format) 格式化为需要的时间，如常用的 “年-月-日 小时：分钟：秒” 格式<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">In [27]: d1</span><br><span class="line">Out[27]: datetime.datetime(2014, 8, 15, 8, 12, 34, 790945)</span><br><span class="line">In [28]: d1.strftime(&apos;%Y-%m-%d %H:%M:%S&apos;)</span><br><span class="line">Out[28]: &apos;2014-08-15 08:12:34’</span><br></pre></td></tr></table></figure></p>
<p>4.datetime.datetime.timple() 转成struct_time格式，这样传递给time.mktime(t)  后，直接转成时间戳格式<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">In [29]: d1</span><br><span class="line">Out[29]: datetime.datetime(2014, 8, 15, 8, 12, 34, 790945)</span><br><span class="line">In [30]: d1.timetuple()</span><br><span class="line">Out[30]: time.struct_time(tm_year=2014, tm_mon=8, tm_mday=15, tm_hour=8, tm_min=12, tm_sec=34, tm_wday=4, tm_yday=227, tm_isdst=-1)</span><br><span class="line">In [31]: time.mktime(d1.timetuple())</span><br><span class="line">Out[31]: 1408061554.0</span><br></pre></td></tr></table></figure></p>
<p>5.datetime.datetime.replace(year, month, day)  返回一个替换后的date对象<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">In [32]: d1</span><br><span class="line">Out[32]: datetime.datetime(2014, 8, 15, 8, 12, 34, 790945)</span><br><span class="line">In [33]: d1.replace(year=2000)</span><br><span class="line">Out[33]: datetime.datetime(2000, 8, 15, 8, 12, 34, 790945)</span><br></pre></td></tr></table></figure></p>
<p>6.datetime.datetime.fromtimestamp(timestamp) 将时间戳转化为datetime对象<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">In [34]: time.time()</span><br><span class="line">Out[34]: 1408061894.081552</span><br><span class="line">In [35]: datetime.datetime.fromtimestamp(1408061894)</span><br><span class="line">Out[35]: datetime.datetime(2014, 8, 15, 8, 18, 14)</span><br></pre></td></tr></table></figure></p>
<p>4.datetime.timedelta类</p>
<p>没啥好说的，主要做时间的加减法用，如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">In [78]: today = datetime.datetime.today()</span><br><span class="line">In [79]: yesterday = today - datetime.timedelta(days=1)</span><br><span class="line">In [80]: yesterday</span><br><span class="line">Out[80]: datetime.datetime(2014, 8, 14, 15, 8, 25, 783471)</span><br><span class="line">In [81]: today</span><br><span class="line">Out[81]: datetime.datetime(2014, 8, 15, 15, 8, 25, 783471)</span><br></pre></td></tr></table></figure></p>
</div><div class="tags"><a href="/tags/Python/">Python</a></div><div class="post-nav"><a class="pre" href="/2017/01/07/Python编码问题/">Python编码问题</a><a class="next" href="/2017/01/05/Pandans数据分析/">Pandas数据分析</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form class="search-form" action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank"><input type="text" name="q" maxlength="20" placeholder="Search"><input type="hidden" name="sitesearch" value="http://iusepython.com"></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> Categories</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/FrontEnd/">FrontEnd</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Frontend/">Frontend</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Linux/">Linux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Others/">Others</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/">Python</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spider/">Spider</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> Tags</i></div><div class="tagcloud"><a href="/tags/sqlalchemy/" style="font-size: 15px;">sqlalchemy</a> <a href="/tags/Frontend/" style="font-size: 15px;">Frontend</a> <a href="/tags/Web/" style="font-size: 15px;">Web</a> <a href="/tags/FrontEnd/" style="font-size: 15px;">FrontEnd</a> <a href="/tags/Django/" style="font-size: 15px;">Django</a> <a href="/tags/Docker/" style="font-size: 15px;">Docker</a> <a href="/tags/Deploy/" style="font-size: 15px;">Deploy</a> <a href="/tags/Git/" style="font-size: 15px;">Git</a> <a href="/tags/JavaScript/" style="font-size: 15px;">JavaScript</a> <a href="/tags/Python/" style="font-size: 15px;">Python</a> <a href="/tags/Mysql/" style="font-size: 15px;">Mysql</a> <a href="/tags/IDE/" style="font-size: 15px;">IDE</a> <a href="/tags/Nginx/" style="font-size: 15px;">Nginx</a> <a href="/tags/Database/" style="font-size: 15px;">Database</a> <a href="/tags/Virtualenv/" style="font-size: 15px;">Virtualenv</a> <a href="/tags/Linux/" style="font-size: 15px;">Linux</a> <a href="/tags/Ubuntu/" style="font-size: 15px;">Ubuntu</a> <a href="/tags/flask/" style="font-size: 15px;">flask</a> <a href="/tags/Html/" style="font-size: 15px;">Html</a> <a href="/tags/mysql/" style="font-size: 15px;">mysql</a> <a href="/tags/node-js/" style="font-size: 15px;">node.js</a> <a href="/tags/Shell/" style="font-size: 15px;">Shell</a> <a href="/tags/Vim/" style="font-size: 15px;">Vim</a> <a href="/tags/Spider/" style="font-size: 15px;">Spider</a> <a href="/tags/Webpack/" style="font-size: 15px;">Webpack</a> <a href="/tags/zsh/" style="font-size: 15px;">zsh</a> <a href="/tags/du-df/" style="font-size: 15px;">du / df</a> <a href="/tags/DA/" style="font-size: 15px;">DA</a> <a href="/tags/Others/" style="font-size: 15px;">Others</a> <a href="/tags/Socket/" style="font-size: 15px;">Socket</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> Recent</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2018/11/29/docker-compose/">docker-compose的语法和名利</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/05/17/快速查看大文件位置/">快速定位大文件</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/01/17/SSH config使用教程/">SSH config使用教程</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/10/17/nginx的proxy_pass详解/">Nginx配置本地域名路由</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/10/17/nginx的负载均衡/">Nginx负载均衡</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/10/17/查看文件大小/">Nginx配置本地域名路由</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/17/网络概念整理/">网络概念整理</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/17/nginx配置本地域名路由/">Nginx配置本地域名路由</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/17/Git Rebase/">Git Rebase</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/06/04/Python类中使用-call/">Python类中使用__call__</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> Links</i></div><ul></ul><a href="https://github.com/fanhaipeng0403" title="Github" target="_blank">Github</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2018 <a href="/." rel="nofollow">好记性不如烂笔头.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//lib.baomitu.com/fancybox/3.5.2/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/fancybox/3.5.2/jquery.fancybox.min.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>